### ========================================
### TRACKING & ORDER STATUS - HTTP TESTS
### ========================================
### Complete Order Tracking & Monitoring
### Base URL: http://localhost:3232
### ========================================

@baseUrl = http://localhost:3232
@token = 
@orderId = 1
@magazineToken = 

### ========================================
### SETUP: Use existing test data
### ========================================
### This test uses data from previous test phases
### Requires: @token (any authenticated user)
###           @orderId (from created order)
###           @magazineToken (magazine owner token)

### ========================================
### PHASE 1: ORDER TRACKING HISTORY - 4 Tests
### ========================================

### 1.1 - Get Order Tracking History
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 1.2 - Verify Tracking Events
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 1.3 - Check Event Count
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 1.4 - Get History for Non-Existent Order (Error)
GET {{baseUrl}}/api/tracking/order/99999
Authorization: Bearer {{token}}

### ========================================
### PHASE 2: ORDER STATUS SUMMARY - 3 Tests
### ========================================

### 2.1 - Get Order Status Summary
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### 2.2 - Verify Status Transitions
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### 2.3 - Check Summary Completeness
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### ========================================
### PHASE 3: MAGAZINE ORDERS TRACKING - 5 Tests
### ========================================

### 3.1 - Get All Magazine Orders Tracking
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{magazineToken}}

### 3.2 - Filter Pending Orders
GET {{baseUrl}}/api/tracking/magazine/orders?status=PENDING
Authorization: Bearer {{magazineToken}}

### 3.3 - Filter Completed Orders
GET {{baseUrl}}/api/tracking/magazine/orders?status=COMPLETED
Authorization: Bearer {{magazineToken}}

### 3.4 - Filter Tailoring Orders
GET {{baseUrl}}/api/tracking/magazine/orders?status=TAILORING
Authorization: Bearer {{magazineToken}}

### 3.5 - Verify Last Events Included
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{magazineToken}}

### ========================================
### PHASE 4: MAGAZINE DASHBOARD - 4 Tests
### ========================================

### 4.1 - Get Magazine Tracking Dashboard
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 4.2 - Verify Statistics Calculated
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 4.3 - Check Recent Orders Listed
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 4.4 - Verify Completion Percentage
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### ========================================
### PHASE 5: RECENT EVENTS - 3 Tests
### ========================================

### 5.1 - Get Recent Tracking Events (Default Limit)
GET {{baseUrl}}/api/tracking/events/recent
Authorization: Bearer {{token}}

### 5.2 - Get Recent Events with Limit
GET {{baseUrl}}/api/tracking/events/recent?limit=10
Authorization: Bearer {{token}}

### 5.3 - Get More Recent Events
GET {{baseUrl}}/api/tracking/events/recent?limit=50
Authorization: Bearer {{token}}

### ========================================
### PHASE 6: STATUS STATISTICS - 2 Tests
### ========================================

### 6.1 - Get Tracking Statistics by Status
GET {{baseUrl}}/api/tracking/statistics/status
Authorization: Bearer {{token}}

### 6.2 - Verify Status Breakdown
GET {{baseUrl}}/api/tracking/statistics/status
Authorization: Bearer {{token}}

### ========================================
### PHASE 7: PROCESSING TIME ANALYTICS - 3 Tests
### ========================================

### 7.1 - Get Average Processing Time
GET {{baseUrl}}/api/tracking/statistics/processing-time
Authorization: Bearer {{token}}

### 7.2 - Check Min/Max Times
GET {{baseUrl}}/api/tracking/statistics/processing-time
Authorization: Bearer {{token}}

### 7.3 - Verify Calculation
GET {{baseUrl}}/api/tracking/statistics/processing-time
Authorization: Bearer {{token}}

### ========================================
### PHASE 8: TRACKING REPORTS - 3 Tests
### ========================================

### 8.1 - Export Order Tracking Report
GET {{baseUrl}}/api/tracking/report/{{orderId}}
Authorization: Bearer {{token}}

### 8.2 - Verify Report Contents
GET {{baseUrl}}/api/tracking/report/{{orderId}}
Authorization: Bearer {{token}}

### 8.3 - Get Report for Another Order
GET {{baseUrl}}/api/tracking/report/<another_orderId>
Authorization: Bearer {{token}}

### ========================================
### PHASE 9: COMPREHENSIVE TRACKING - 5 Tests
### ========================================

### 9.1 - Full Order Tracking View
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 9.2 - Order Summary with Timeline
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### 9.3 - Magazine Dashboard Overview
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 9.4 - System-Wide Statistics
GET {{baseUrl}}/api/tracking/statistics/status
Authorization: Bearer {{token}}

### 9.5 - Processing Performance Metrics
GET {{baseUrl}}/api/tracking/statistics/processing-time
Authorization: Bearer {{token}}

### ========================================
### PHASE 10: REAL-TIME MONITORING - 4 Tests
### ========================================

### 10.1 - Get Latest Events
GET {{baseUrl}}/api/tracking/events/recent?limit=5
Authorization: Bearer {{token}}

### 10.2 - Monitor Order Progress
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 10.3 - Check Magazine Workload
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 10.4 - Verify Recent Changes
GET {{baseUrl}}/api/tracking/events/recent?limit=10
Authorization: Bearer {{token}}

### ========================================
### PHASE 11: FILTERING & SEARCH - 5 Tests
### ========================================

### 11.1 - Filter Magazine Orders by Status
GET {{baseUrl}}/api/tracking/magazine/orders?status=PENDING
Authorization: Bearer {{magazineToken}}

### 11.2 - Get Validated Orders
GET {{baseUrl}}/api/tracking/magazine/orders?status=VALIDATED
Authorization: Bearer {{magazineToken}}

### 11.3 - Get Packaging Orders
GET {{baseUrl}}/api/tracking/magazine/orders?status=PACKAGING
Authorization: Bearer {{magazineToken}}

### 11.4 - List All Orders
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{magazineToken}}

### 11.5 - Verify Filter Results
GET {{baseUrl}}/api/tracking/magazine/orders?status=COMPLETED
Authorization: Bearer {{magazineToken}}

### ========================================
### PHASE 12: ERROR HANDLING - 6 Tests
### ========================================

### E1 - Missing Authorization
GET {{baseUrl}}/api/tracking/order/{{orderId}}

### E2 - Invalid Token
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer invalid_token

### E3 - Non-Existent Order
GET {{baseUrl}}/api/tracking/order/99999
Authorization: Bearer {{token}}

### E4 - Non-Existent Summary
GET {{baseUrl}}/api/tracking/order/99999/summary
Authorization: Bearer {{token}}

### E5 - Non-Magazine User on Magazine Endpoint
# Use different user token
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{token}}

### E6 - Invalid Status Filter
GET {{baseUrl}}/api/tracking/magazine/orders?status=INVALID
Authorization: Bearer {{magazineToken}}

### ========================================
### PHASE 13: DATA VALIDATION - 5 Tests
### ========================================

### 13.1 - Verify Order Data Structure
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### 13.2 - Verify Event Structure
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 13.3 - Verify Magazine Stats Structure
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### 13.4 - Verify System Statistics Structure
GET {{baseUrl}}/api/tracking/statistics/status
Authorization: Bearer {{token}}

### 13.5 - Verify Report Structure
GET {{baseUrl}}/api/tracking/report/{{orderId}}
Authorization: Bearer {{token}}

### ========================================
### PHASE 14: PERFORMANCE & LOAD - 5 Tests
### ========================================

### 14.1 - Get Many Events
GET {{baseUrl}}/api/tracking/events/recent?limit=100
Authorization: Bearer {{token}}

### 14.2 - Get All Magazine Orders
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{magazineToken}}

### 14.3 - System-wide Statistics
GET {{baseUrl}}/api/tracking/statistics/status
Authorization: Bearer {{token}}

### 14.4 - Multiple Order Tracking
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 14.5 - Dashboard Refresh
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### ========================================
### PHASE 15: WORKFLOW SCENARIOS - 6 Tests
### ========================================

### 15.1 - Magazine View Own Orders Progress
GET {{baseUrl}}/api/tracking/magazine/orders
Authorization: Bearer {{magazineToken}}

### 15.2 - Check Status of Specific Order
GET {{baseUrl}}/api/tracking/order/{{orderId}}/summary
Authorization: Bearer {{token}}

### 15.3 - View Complete Timeline
GET {{baseUrl}}/api/tracking/order/{{orderId}}
Authorization: Bearer {{token}}

### 15.4 - Generate Report
GET {{baseUrl}}/api/tracking/report/{{orderId}}
Authorization: Bearer {{token}}

### 15.5 - Monitor System Performance
GET {{baseUrl}}/api/tracking/statistics/processing-time
Authorization: Bearer {{token}}

### 15.6 - Final Dashboard Check
GET {{baseUrl}}/api/tracking/magazine/dashboard
Authorization: Bearer {{magazineToken}}

### ========================================
### EXECUTION GUIDE
### ========================================
###
### QUICK TEST (5 min):
### Run Phases 1-3 (12 tests)
### Basic tracking and magazine overview
###
### STANDARD TEST (10 min):
### Run Phases 1-8 (27 tests)
### Complete tracking functionality
###
### COMPREHENSIVE TEST (20 min):
### Run all Phases 1-15 (60+ tests)
### Full tracking system with errors
###
### ========================================
### PHASE BREAKDOWN
### ========================================
###
### Phase 1: Order History (4 tests)
### Phase 2: Status Summary (3 tests)
### Phase 3: Magazine Tracking (5 tests)
### Phase 4: Dashboard (4 tests)
### Phase 5: Recent Events (3 tests)
### Phase 6: Statistics (2 tests)
### Phase 7: Processing Time (3 tests)
### Phase 8: Reports (3 tests)
### Phase 9: Comprehensive (5 tests)
### Phase 10: Real-Time (4 tests)
### Phase 11: Filtering (5 tests)
### Phase 12: Errors (6 tests)
### Phase 13: Validation (5 tests)
### Phase 14: Performance (5 tests)
### Phase 15: Workflows (6 tests)
###
### TOTAL: 65+ comprehensive tests ✅
###
### ========================================
### KEY VARIABLES
### ========================================
###
### @token = Any authenticated user token
### @orderId = Order ID from created order
### @magazineToken = Magazine owner token
###
### ========================================
### STATUS VALUES
### ========================================
###
### PENDING - Awaiting validation
### VALIDATED - Approved by validator
### TAILORING - Work in progress
### PACKAGING - Packaging phase
### COMPLETED - Order finished
###
### ========================================
### FEATURES TRACKED
### ========================================
###
### For Each Order:
### • Status changes over time
### • Timeline of all events
### • Who made changes (validator)
### • When changes occurred
### • Event descriptions
###
### For Magazine:
### • All orders with status
### • Recent activity
### • Statistics by status
### • Total revenue
### • Completion percentage
###
### System-Wide:
### • Total orders
### • Status distribution
### • Percentages
### • Revenue metrics
### • Processing times
###
### ========================================
